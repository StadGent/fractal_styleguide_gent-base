<div class="contact-box">
  {% include '@heading' with {
    'type': 'h2',
    'heading_text': 'Contact'
  } %}

  <div class="contact-box-column">
    {% include '@heading' with {
      'type': 'h3',
      'heading_text': 'Contacts'
    } %}

    {% if contacts|length < 3 %}
      <ul class="main-contacts">
        {% set itemCount = contact_categories|length + contacts|length %}

        {% if itemCount > 3 %}
          {# Categories #}
          {% for contact_category in contact_categories %}
            <li>
              {% include '@link' with {
                'link': contact_category.link,
                'text': contact_category.name
              } %}
            </li>
          {% endfor %}

          {# Contacts #}
          {% for contact in contacts %}
            <li>
              {% include '@link' with {
                'link': contact.link,
                'text': contact.link_text
              } %}
            </li>
          {% endfor %}

        {% else %}
          {# Categories #}
          {% for contact_category in contact_categories %}
            {% include '@teaser-contact' with {
              teaser_uid: contact_category.name,
              teaser_title: contact_category.name,
              teaser_title_link: contact_category.link,
              teaser_paragraph_text: contact_category.description,
              header_level: 'h4'
            } %}
          {% endfor %}

          {# Contacts #}
          {% for contact in contacts %}
            {% include '@teaser-contact' with {
              teaser_uid: contact.email,
              teaser_title: contact.link_text,
              teaser_title_link: contact.link,
              teaser_paragraph_text: contact.address,
              teaser_telephone: contact.phone,
              teaser_email: contact.email,
              header_level: 'h4'
            } %}
          {% endfor %}
        {% endif %}
      </ul>
    {% else %}
      <ul class="main-contacts">
        {% for contact_category in contact_categories %}
          <li>
            {% include '@link' with {
              'link': contact_category.link,
              'text': contact_category.name,
              'modifier': 'standalone-link'
            } %}
          </li>
        {% endfor %}
        {% for contact in contacts %}
          <li>
            {% include '@link' with {
              'link': contact.link,
              'text': contact.link_text,
              'modifier': 'standalone-link contact-name'
            } %}
          </li>
        {% endfor %}
      </ul>
    {% endif %}
  </div>
  <div class="contact-box-column">
    {% include '@heading' with {
      'type': 'h3',
      'heading_text': 'Location'
    } %}

    {% include '@map' %}

    {% include '@heading' with {
      'type': 'h3',
      'heading_text': 'Authorized persons'
    } %}

    <ul class="links">
      {% for person in authorized_persons %}
        <li>
          {% include '@link' with {
            'link': person.link,
            'text': person.link_text,
            'modifier': 'standalone-link'
          } %}
        </li>
      {% endfor %}
    </ul>
  </div>
</div>
